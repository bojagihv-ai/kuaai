/* ─── Reset & variables ─────────────────────────────────────────────────── */
:root {
  --bg: #0d0f14;
  --bg2: #141720;
  --bg3: #1c2030;
  --border: #2a2f45;
  --text: #e0e6f0;
  --text2: #8892a4;
  --green: #00d084;
  --red: #ff4b6e;
  --yellow: #f5c842;
  --blue: #4e8ef7;
  --purple: #a78bfa;
  --card-radius: 12px;
  --font: 'Segoe UI', system-ui, sans-serif;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: var(--font); background: var(--bg); color: var(--text); font-size: 14px; }

/* ─── Header ────────────────────────────────────────────────────────────── */
header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 24px; background: var(--bg2); border-bottom: 1px solid var(--border);
  position: sticky; top: 0; z-index: 100;
}
.logo { font-size: 18px; font-weight: 700; letter-spacing: -0.3px; }
.header-right { display: flex; gap: 10px; align-items: center; }

/* ─── Badges ────────────────────────────────────────────────────────────── */
.badge {
  padding: 3px 10px; border-radius: 20px; font-size: 11px; font-weight: 600;
  text-transform: uppercase; letter-spacing: 0.5px;
}
.badge-on  { background: rgba(0,208,132,.15); color: var(--green); border: 1px solid rgba(0,208,132,.3); }
.badge-off { background: rgba(255,75,110,.15); color: var(--red);   border: 1px solid rgba(255,75,110,.3); }
.badge-warn { background: rgba(245,200,66,.15); color: var(--yellow); border: 1px solid rgba(245,200,66,.3); }
.badge-buy  { background: rgba(0,208,132,.2);  color: var(--green); }
.badge-sell { background: rgba(255,75,110,.2); color: var(--red);   }
.badge-hold { background: rgba(78,142,247,.2); color: var(--blue);  }

/* ─── Main layout ───────────────────────────────────────────────────────── */
main {
  display: grid;
  grid-template-columns: 1fr 1fr 340px;
  grid-template-rows: auto auto auto auto;
  gap: 16px; padding: 16px 20px;
  max-width: 1800px; margin: 0 auto;
}

/* ─── Ticker bar ────────────────────────────────────────────────────────── */
.ticker-bar {
  grid-column: 1 / -1;
  display: flex; gap: 12px; flex-wrap: wrap;
}
.ticker-card {
  flex: 1; min-width: 160px;
  background: var(--bg2); border: 1px solid var(--border); border-radius: var(--card-radius);
  padding: 14px 18px;
}
.ticker-label { font-size: 11px; color: var(--text2); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
.ticker-price { font-size: 22px; font-weight: 700; letter-spacing: -0.5px; }
.ticker-change { font-size: 12px; margin-top: 4px; color: var(--text2); }
.ticker-change.up  { color: var(--green); }
.ticker-change.down { color: var(--red); }
.kimchi-card { border-color: rgba(167,139,250,.4); }

/* ─── Chart section ─────────────────────────────────────────────────────── */
.chart-section {
  grid-column: 1 / 3; grid-row: 2 / 4;
  background: var(--bg2); border: 1px solid var(--border); border-radius: var(--card-radius);
  display: flex; flex-direction: column;
}
.chart-header { padding: 14px 18px; border-bottom: 1px solid var(--border); }
.chart-controls { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
.chart-body { padding: 12px; height: 340px; position: relative; }
.chart-body-small { height: 100px; }
.chart-body canvas { width: 100% !important; height: 100% !important; }

/* ─── Indicators panel ───────────────────────────────────────────────────── */
.indicators-panel {
  grid-column: 3; grid-row: 2;
  background: var(--bg2); border: 1px solid var(--border); border-radius: var(--card-radius);
  padding: 18px; display: flex; flex-direction: column; gap: 12px;
}
.indicators-panel h3 { display: flex; align-items: center; gap: 8px; }
.indicator-score-bar { }
.score-track {
  position: relative; height: 20px; background: linear-gradient(to right, var(--red), #555, var(--green));
  border-radius: 10px; overflow: visible;
}
.score-fill {
  position: absolute; top: 50%; transform: translateY(-50%);
  width: 12px; height: 24px; background: #fff; border-radius: 6px;
  box-shadow: 0 0 8px rgba(255,255,255,.5);
  transition: left .4s ease;
  left: 50%;
}
.score-val {
  position: absolute; right: -36px; top: 50%; transform: translateY(-50%);
  font-weight: 700; font-size: 13px;
}
.score-labels { display: flex; justify-content: space-between; font-size: 10px; color: var(--text2); margin-top: 4px; }
.indicator-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
.ind-item {
  display: flex; justify-content: space-between; align-items: center;
  background: var(--bg3); border-radius: 8px; padding: 6px 10px;
  font-size: 12px;
}
.ind-label { color: var(--text2); }
.ind-val { font-weight: 600; }
.recommendation-box {
  background: var(--bg3); border-radius: 10px; padding: 12px;
  border-left: 3px solid var(--blue);
  font-size: 13px; line-height: 1.5;
}

/* ─── Kimchi section ─────────────────────────────────────────────────────── */
.kimchi-section {
  grid-column: 3; grid-row: 3;
  background: var(--bg2); border: 1px solid var(--border); border-radius: var(--card-radius);
  padding: 18px; display: flex; flex-direction: column; gap: 10px;
}
.kimchi-gauge-wrap { display: flex; justify-content: center; }
.kimchi-detail { display: flex; flex-direction: column; gap: 4px; }
.kd-row { display: flex; justify-content: space-between; font-size: 13px; padding: 3px 0; }
.arb-config { background: var(--bg3); border-radius: 10px; padding: 12px; display: flex; flex-direction: column; gap: 8px; }
.arb-config label { display: flex; justify-content: space-between; align-items: center; font-size: 13px; }
.arb-config input[type=number] { width: 120px; }
.profit-info { background: rgba(0,208,132,.1); border: 1px solid rgba(0,208,132,.3); border-radius: 8px; padding: 10px; font-size: 13px; }

/* ─── Bot control section ────────────────────────────────────────────────── */
.bot-control-section {
  grid-column: 1; grid-row: 4;
  background: var(--bg2); border: 1px solid var(--border); border-radius: var(--card-radius);
  padding: 18px; display: flex; flex-direction: column; gap: 12px;
}
.bot-mode-tabs { display: flex; gap: 4px; background: var(--bg3); border-radius: 10px; padding: 4px; }
.tab-btn {
  flex: 1; padding: 8px; border: none; background: transparent; color: var(--text2);
  border-radius: 8px; cursor: pointer; font-size: 13px; transition: all .2s;
}
.tab-btn.active { background: var(--bg2); color: var(--text); box-shadow: 0 1px 4px rgba(0,0,0,.4); }
.tab-content { display: flex; flex-direction: column; gap: 8px; }
.tab-content.hidden { display: none; }
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.form-grid label { display: flex; flex-direction: column; gap: 4px; font-size: 12px; color: var(--text2); }
.form-grid label input, .form-grid label select { }
.bot-action-row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
.bot-action-row label { display: flex; gap: 8px; align-items: center; font-size: 13px; }
.mode-toggle { display: flex; align-items: center; gap: 8px; font-size: 13px; }
.bot-buttons { display: flex; gap: 10px; }
.pnl-summary { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
.pnl-item { background: var(--bg3); border-radius: 10px; padding: 12px; display: flex; flex-direction: column; gap: 4px; align-items: center; text-align: center; }
.pnl-item span { font-size: 11px; color: var(--text2); }
.pnl-item strong { font-size: 16px; }
.dca-table { background: var(--bg3); border-radius: 10px; overflow: hidden; }
.dca-row { display: flex; justify-content: space-between; padding: 8px 12px; font-size: 13px; border-bottom: 1px solid var(--border); }
.dca-row:last-child { border: none; }

/* ─── Trade log section ──────────────────────────────────────────────────── */
.trade-log-section {
  grid-column: 2 / -1; grid-row: 4;
  background: var(--bg2); border: 1px solid var(--border); border-radius: var(--card-radius);
  padding: 18px; display: flex; flex-direction: column; gap: 12px;
}
.trade-log { display: flex; flex-direction: column; gap: 6px; max-height: 300px; overflow-y: auto; }
.trade-log-empty { color: var(--text2); text-align: center; padding: 24px; font-size: 13px; }
.trade-item {
  display: flex; justify-content: space-between; align-items: center;
  background: var(--bg3); border-radius: 10px; padding: 10px 14px;
  font-size: 13px; border-left: 3px solid transparent;
}
.trade-item.buy  { border-color: var(--green); }
.trade-item.sell { border-color: var(--red); }
.trade-item .ti-side { font-weight: 700; min-width: 36px; }
.trade-item .ti-side.buy  { color: var(--green); }
.trade-item .ti-side.sell { color: var(--red);   }
.trade-item .ti-price { font-weight: 600; }
.trade-item .ti-pnl.pos { color: var(--green); }
.trade-item .ti-pnl.neg { color: var(--red);   }
.trade-item .ti-time { color: var(--text2); font-size: 11px; }

/* ─── Form elements ──────────────────────────────────────────────────────── */
input[type=text], input[type=number], input[type=password], select {
  background: var(--bg3); border: 1px solid var(--border); color: var(--text);
  border-radius: 8px; padding: 8px 12px; font-size: 13px; width: 100%;
  transition: border-color .2s;
}
input:focus, select:focus { outline: none; border-color: var(--blue); }

/* ─── Buttons ────────────────────────────────────────────────────────────── */
.btn {
  padding: 9px 18px; border: none; border-radius: 8px; cursor: pointer;
  font-size: 13px; font-weight: 600; transition: all .2s;
}
.btn:disabled { opacity: .4; cursor: not-allowed; }
.btn-sm { padding: 5px 12px; font-size: 12px; }
.btn-lg { padding: 12px 24px; font-size: 15px; flex: 1; }
.btn-primary  { background: var(--blue);   color: #fff; }
.btn-success  { background: var(--green);  color: #000; }
.btn-danger   { background: var(--red);    color: #fff; }
.btn-secondary { background: var(--bg3);   color: var(--text); border: 1px solid var(--border); }
.btn-ghost    { background: transparent;   color: var(--text2); }
.btn-full     { width: 100%; }
.btn:hover:not(:disabled) { filter: brightness(1.15); transform: translateY(-1px); }

/* ─── Toggle switch ──────────────────────────────────────────────────────── */
.toggle-row { display: flex; justify-content: space-between; align-items: center; }
.switch { position: relative; display: inline-block; width: 42px; height: 22px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
  position: absolute; cursor: pointer; inset: 0;
  background: var(--border); border-radius: 22px; transition: .3s;
}
.slider:before {
  content: ''; position: absolute; width: 16px; height: 16px;
  background: #fff; border-radius: 50%; left: 3px; top: 3px; transition: .3s;
}
input:checked + .slider { background: var(--green); }
input:checked + .slider:before { transform: translateX(20px); }

/* ─── Modal ──────────────────────────────────────────────────────────────── */
.modal {
  position: fixed; inset: 0; background: rgba(0,0,0,.7);
  display: flex; align-items: center; justify-content: center; z-index: 999;
}
.modal.hidden { display: none; }
.modal-inner {
  background: var(--bg2); border: 1px solid var(--border);
  border-radius: 16px; padding: 28px; width: 440px; max-width: 95vw;
  display: flex; flex-direction: column; gap: 14px;
}
.modal-inner h2 { font-size: 18px; margin-bottom: 4px; }
.form-group { display: flex; flex-direction: column; gap: 6px; font-size: 13px; }
.modal-buttons { display: flex; gap: 8px; }
.msg { padding: 10px 14px; border-radius: 8px; font-size: 13px; }
.msg.success { background: rgba(0,208,132,.15); color: var(--green); }
.msg.error   { background: rgba(255,75,110,.15); color: var(--red);  }

/* ─── Toast ──────────────────────────────────────────────────────────────── */
.toast {
  position: fixed; bottom: 24px; right: 24px; z-index: 9999;
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: 10px; padding: 12px 20px; font-size: 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,.5); animation: slideIn .3s ease;
  max-width: 320px;
}
.toast.hidden { display: none; }
@keyframes slideIn { from { transform: translateY(20px); opacity: 0; } }

/* ─── Utilities ──────────────────────────────────────────────────────────── */
.green  { color: var(--green); }
.red    { color: var(--red); }
.yellow { color: var(--yellow); }
.hidden { display: none !important; }
hr { border: none; border-top: 1px solid var(--border); }
h3 { font-size: 15px; font-weight: 700; }
h4 { font-size: 13px; font-weight: 600; color: var(--text2); }

/* ─── Scrollbar ──────────────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

/* ─── Responsive ─────────────────────────────────────────────────────────── */
@media (max-width: 1100px) {
  main { grid-template-columns: 1fr 340px; }
  .chart-section { grid-column: 1; grid-row: 2; }
  .indicators-panel { grid-column: 2; grid-row: 2; }
  .kimchi-section { grid-column: 2; grid-row: 3; }
  .bot-control-section { grid-column: 1; grid-row: 3; }
  .trade-log-section { grid-column: 1 / -1; grid-row: 4; }
}
@media (max-width: 700px) {
  main { grid-template-columns: 1fr; padding: 10px; }
  .chart-section, .indicators-panel, .kimchi-section,
  .bot-control-section, .trade-log-section { grid-column: 1; }
  .form-grid { grid-template-columns: 1fr; }
  .pnl-summary { grid-template-columns: 1fr 1fr; }
}
